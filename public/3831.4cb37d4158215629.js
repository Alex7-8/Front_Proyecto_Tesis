"use strict";(self.webpackChunkvex=self.webpackChunkvex||[]).push([[3831],{43831:(W,x,i)=>{i.r(x),i.d(x,{EmpleadoGridModule:()=>X});var s=i(96814),c=i(29522),y=i(33594),U=i(62008),A=i(95982),G=i(80493),M=i(22096),k=i(86820),S=i(83951),J=i(2852),d=i(37398),O=i(96726),F=i(84005),t=i(65879),Z=i(19347),N=i(71996),E=i(22939),v=i(74104),m=i(32296),g=i(30617),T=i(92596),_=i(23680);function Q(e,r){1&e&&t._UZ(0,"mat-icon",11)}function j(e,r){1&e&&t._UZ(0,"mat-icon",12)}let B=(()=>{class e{constructor(){this.openContact=new t.vpe,this.toggleStar=new t.vpe}ngOnInit(){}emitToggleStar(a,o){a.stopPropagation(),this.toggleStar.emit(o)}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["vex-contacts-card"]],inputs:{contact:"contact"},outputs:{openContact:"openContact",toggleStar:"toggleStar"},decls:17,vars:6,consts:[[1,"card","overflow-hidden"],["matRipple","",1,"p-4","text-center","hover:bg-hover","trans-ease-out","cursor-pointer","relative",3,"click"],[1,"avatar","h-24","w-24","mx-auto",3,"src"],[1,"title","mb-1","mt-3"],[1,"body-2","text-secondary","flex","items-center","justify-center"],["svgIcon","mat:business",1,"ltr:mr-1","rtl:ml-1","icon-xs"],["svgIcon","mat:person_outline",1,"ltr:mr-1","rtl:ml-1","icon-xs"],["mat-icon-button","","type","button",1,"absolute","top-2","right-2",3,"click"],["svgIcon","mat:cancel",4,"ngIf"],["svgIcon","mat:control_point",4,"ngIf"],[1,"bg-app-bar","p-2","flex","items-center","justify-around",2,"height","2rem"],["svgIcon","mat:cancel"],["svgIcon","mat:control_point"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return o.openContact.emit(o.contact.c_Id_Persona)}),t._UZ(2,"img",2),t.TgZ(3,"h2",3),t._uU(4),t.qZA(),t.TgZ(5,"div",4),t._UZ(6,"mat-icon",5),t.TgZ(7,"span"),t._uU(8),t.qZA()(),t.TgZ(9,"div",4),t._UZ(10,"mat-icon",6),t.TgZ(11,"span"),t._uU(12),t.qZA()(),t.TgZ(13,"button",7),t.NdJ("click",function(l){return o.emitToggleStar(l,null==o.contact?null:o.contact.c_Id_Persona)}),t.YNc(14,Q,1,0,"mat-icon",8),t.YNc(15,j,1,0,"mat-icon",9),t.qZA()(),t._UZ(16,"div",10),t.qZA()),2&a&&(t.xp6(2),t.Q6J("src",null==o.contact?null:o.contact.c_Img_Base,t.LSH),t.xp6(2),t.Oqu(null==o.contact?null:o.contact.c_Primer_Nombre),t.xp6(4),t.Oqu(null==o.contact?null:o.contact.c_Sucursal),t.xp6(4),t.Oqu(null==o.contact?null:o.contact.c_ID_ROL),t.xp6(2),t.Q6J("ngIf",1==(null==o.contact?null:o.contact.c_Estado)),t.xp6(1),t.Q6J("ngIf",2==(null==o.contact?null:o.contact.c_Estado)))},dependencies:[s.O5,m.RK,g.Hw,_.wG]}),e})();var b=i(82599);const w=["searchInput"];function P(e,r){if(1&e&&(t.TgZ(0,"a",24,25),t._uU(2),t.qZA()),2&e){const a=r.$implicit,o=t.MAs(1);t.Q6J("active",o.isActive)("disabled",a.disabled)("routerLink",a.route),t.xp6(2),t.hij(" ",a.label," ")}}function R(e,r){if(1&e){const a=t.EpF();t.TgZ(0,"vex-contacts-card",29),t.NdJ("openContact",function(n){t.CHM(a);const l=t.oxw(2);return t.KtG(l.openContact(n))})("toggleStar",function(n){t.CHM(a);const l=t.oxw(2);return t.KtG(l.toggleStar(n))}),t.qZA()}if(2&e){const a=r.$implicit;t.Q6J("@fadeInUp",void 0)("contact",a)}}function L(e,r){if(1&e&&(t.TgZ(0,"div",26)(1,"div",27),t.YNc(2,R,1,2,"vex-contacts-card",28),t.ALo(3,"async"),t.qZA()()),2&e){const a=t.oxw();t.Q6J("@stagger",void 0),t.xp6(2),t.Q6J("ngForOf",t.lcZ(3,3,a.filteredContacts$))("ngForTrackBy",a.trackById)}}function Y(e,r){1&e&&(t.TgZ(0,"div",30),t._UZ(1,"img",31),t.TgZ(2,"h2",32),t._uU(3,"No contacts matching your filters"),t.qZA()()),2&e&&t.Q6J("@scaleFadeIn",void 0)}function z(e,r){return r.c_Id_Persona}const $=[{path:"",redirectTo:"all",pathMatch:"full"},{path:":activeCategory",component:(()=>{class e{buscar(){const a=this.searchInput.nativeElement.value.toLowerCase();if(a){const o=this.empleado.filter(n=>{for(const l in n)if(n.hasOwnProperty(l)&&"string"==typeof n[l]&&n[l].toLowerCase().includes(a))return!0;return!1});this.filteredContacts$=this.route.paramMap.pipe((0,d.U)(n=>n.get("activeCategory")),(0,d.U)(n=>{switch(n){case"activos":return this.activeCategory=n,o.filter(l=>1===l.c_Estado);case"inactivos":return this.activeCategory=n,o.filter(l=>2===l.c_Estado);default:return o}}))}}constructor(a,o,n,l,f,I){this.dialog=a,this.route=o,this.CrearUsuariosService=n,this.router=l,this.renderer=f,this.snackBar=I,this.estado=1,this.empleado=[],this.filteredContacts$=(0,M.of)([]),this.loadingData=!0,this.activeCategory="activos",this.tableData=this.empleado,this.links=[{label:"Activos",route:"../activos"},{label:"Inactivos",route:"../inactivos"}],this.trackById=z}ngOnInit(){this.obtenerTablaData()}obtenerTablaData(){this.CrearUsuariosService.getEmpleado("").subscribe(a=>{this.empleado=a.response,this.tableData=this.empleado.filter(o=>o.c_Estado===this.estado),this.filteredContacts$=this.route.paramMap.pipe((0,d.U)(o=>o.get("activeCategory")),(0,d.U)(o=>{switch(o){case"activos":return this.activeCategory=o,this.empleado.filter(n=>1===n.c_Estado);case"inactivos":return this.activeCategory=o,this.empleado.filter(n=>2===n.c_Estado);default:return this.empleado}}))})}openContact(a){this.dialog.open(G.t,{data:a||null,width:"70rem"})}toggleStar(a){const o=this.empleado.find(h=>h.c_Id_Persona===a),n=localStorage.getItem("token"),f=(0,O.Z)(n).IdUsuario;this.c_Id_UsuarioModificacion=f,"activos"==this.activeCategory?(this.titulo="\xbfEst\xe1s seguro que deseas desactivar el empleado?",this.razon="Razon por la cual se desactiva el registro",this.estado=1):(this.titulo="\xbfEst\xe1s seguro de que deseas activar el empleado?",this.razon="Razon por la cual se activa el registro",this.estado=2),console.log(this.titulo,this.activeCategory),this.dialog.open(F.$,{height:"20rem",width:"28rem",data:{title:this.titulo,textAreaValue:"",razon:this.razon,valido:!0}}).afterClosed().subscribe(h=>{h&&this.CrearUsuariosService.CambiarEstadoEmpleado(a,o.c_Id_Usuario,this.c_Id_UsuarioModificacion,h).subscribe(p=>{console.log(p),p.ok?(this.snackBar.open(p.transaccion_Mensaje,"Cerrar",{duration:5e3,panelClass:["success-snackbar"]}),this.obtenerTablaData(),this.filteredContacts$=this.route.paramMap.pipe((0,d.U)(u=>u.get("activeCategory")),(0,d.U)(u=>{switch(u){case"activos":return this.activeCategory=u,this.empleado.filter(C=>1===C.c_Estado);case"inactivos":return this.activeCategory=u,this.empleado.filter(C=>2===C.c_Estado);default:return this.empleado}}))):this.snackBar.open("Codigo de Error: "+p.transaccion_Estado+" Mensje: "+p.transaccion_Mensaje,"Cerrar",{duration:1e4,panelClass:["red-snackbar"]})})})}onToggleChange(a){a.checked&&"activos"==this.activeCategory?(this.CrearUsuariosService.estado=1,this.router.navigate(["/apps/empleado/table"])):a.checked&&"inactivos"==this.activeCategory&&(this.CrearUsuariosService.estado=2,this.router.navigate(["/apps/empleado/table"]))}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(Z.uw),t.Y36(c.gz),t.Y36(N.x),t.Y36(c.F0),t.Y36(t.Qsj),t.Y36(E.ux))},e.\u0275cmp=t.Xpm({type:e,selectors:[["vex-contacts-grid"]],viewQuery:function(a,o){if(1&a&&t.Gf(w,7),2&a){let n;t.iGM(n=t.CRH())&&(o.searchInput=n.first)}},decls:30,vars:10,consts:[[1,"h-full","flex","flex-col"],[1,"p-6","pb-0","bg-foreground","shadow-b","flex-none","border-b","border-gray-200"],[1,"container","px-0"],[1,"display-1","font-bold","mt-0","mb-4","flex","items-center"],[1,"w-12","h-12","rounded-full","text-primary","ltr:mr-4","rtl:ml-4","flex","items-center","justify-center","bg-primary/10"],["svgIcon","mat:contacts"],[1,"block"],[1,"sm:flexi","tems-center","bg-foreground","rounded-full","overflow-hidden","relative","ltr:pl-5","rtl:pr-5","h-12","max-w-md","w-full","shadow-xl","mx-auto"],[1,"search-icon"],["svgIcon","mat:search",1,"text-secondary"],["placeholder","Buscar...","type","text",1,"border-0","h-12","outline-none","ltr:pl-4","rtl:pr-4","placeholder:text-secondary","bg-foreground","flex-auto",3,"input"],["searchInput",""],[1,"flex","items-center"],["mat-tab-nav-bar","",1,"border-0","flex-auto"],["mat-tab-link","","routerLinkActive","",3,"active","disabled","routerLink",4,"ngFor","ngForOf"],[1,"ltr:ml-1","rtl:mr-1","flex-none","hidden","sm:inline-block"],["for","gridViewToggle",2,"margin-right","0.3rem"],["id","gridViewToggle","color","primary",3,"checked","change"],["color","primary","mat-mini-fab","","matTooltip","Registrar Empleado","type","button",1,"ltr:ml-1","rtl:mr-1","flex-none","sm:hidden",3,"click"],["svgIcon","mat:person_add"],["color","primary","mat-flat-button","","type","button",1,"ltr:ml-4","rtl:mr-4","flex-none","hidden","sm:inline-block",3,"click"],["svgIcon","mat:add",1,"ltr:mr-2","rtl:ml-2","ltr:-ml-1","rtl:-mr-1","icon-sm"],["class","overflow-y-auto flex-auto",4,"ngIf"],["class","flex-auto flex flex-col items-center justify-center",4,"ngIf"],["mat-tab-link","","routerLinkActive","",3,"active","disabled","routerLink"],["rla","routerLinkActive"],[1,"overflow-y-auto","flex-auto"],[1,"p-gutter","grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-4","gap-6","container"],[3,"contact","openContact","toggleStar",4,"ngFor","ngForOf","ngForTrackBy"],[3,"contact","openContact","toggleStar"],[1,"flex-auto","flex","flex-col","items-center","justify-center"],["src","assets/img/illustrations/idea.svg",1,"m-12","h-64"],[1,"headline","m-0","text-center"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"span",4),t._UZ(5,"mat-icon",5),t.qZA(),t.TgZ(6,"span",6),t._uU(7,"Empleados"),t.qZA()(),t.TgZ(8,"div",7)(9,"div",8),t._UZ(10,"mat-icon",9),t.qZA(),t.TgZ(11,"input",10,11),t.NdJ("input",function(){return o.buscar()}),t.qZA()(),t.TgZ(13,"div",12)(14,"nav",13),t.YNc(15,P,3,4,"a",14),t.qZA(),t.TgZ(16,"div",15)(17,"label",16),t._uU(18,"Vista de lista"),t.qZA(),t.TgZ(19,"mat-slide-toggle",17),t.NdJ("change",function(l){return o.onToggleChange(l)}),t.qZA()(),t.TgZ(20,"button",18),t.NdJ("click",function(){return o.openContact()}),t._UZ(21,"mat-icon",19),t.qZA(),t.TgZ(22,"button",20),t.NdJ("click",function(){return o.openContact()}),t._UZ(23,"mat-icon",21),t.TgZ(24,"span"),t._uU(25,"Registrar Nuevo"),t.qZA()()()()(),t.YNc(26,L,4,5,"div",22),t.ALo(27,"async"),t.YNc(28,Y,4,1,"div",23),t.ALo(29,"async"),t.qZA()),2&a&&(t.xp6(4),t.Q6J("@scaleIn",void 0),t.xp6(2),t.Q6J("@fadeInRight",void 0),t.xp6(9),t.Q6J("ngForOf",o.links),t.xp6(4),t.Q6J("checked",!1),t.xp6(7),t.Q6J("ngIf",t.lcZ(27,6,o.filteredContacts$).length>0),t.xp6(2),t.Q6J("ngIf",0===t.lcZ(29,8,o.filteredContacts$).length))},dependencies:[s.sg,s.O5,c.rH,c.Od,y.jG,v.BU,v.Nj,m.lW,m.nh,g.Hw,T.gM,B,b.Rr,s.Ov],styles:['@charset "UTF-8";@media (min-width: 768px){.card-list[_ngcontent-%COMP%]{display:none}}@media (max-width: 767px){.table-list[_ngcontent-%COMP%]{display:none}}.sm-flexi[_ngcontent-%COMP%]{position:relative}.search-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:10px;transform:translateY(-50%)}input[_ngcontent-%COMP%]{padding-left:30px}'],data:{animation:[U.a,A.G,k.KF,S.$,J.f]}}),e})(),data:{scrollDisabled:!0,toolbarShadowEnabled:!1}}];let D=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.Bz.forChild($),c.Bz,y.d8]}),e})();var H=i(48480);let V=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[s.ez,m.ot,g.Ps,_.si]}),e})();var K=i(498);let X=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[s.ez,D,v.Nh,E.ZX,m.ot,Z.Is,H.Q,g.Ps,T.AV,V,b.rP,K.ComponentsSlideToggleModule]}),e})()}}]);