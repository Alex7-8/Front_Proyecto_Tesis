"use strict";(self.webpackChunkvex=self.webpackChunkvex||[]).push([[8259],{3527:(j,M,n)=>{n.d(M,{I:()=>E});var l=n(69862),g=n(20553),v=n(58504),I=n(26306),C=n(65879),U=n(80154);let E=(()=>{class h{constructor(c,s){this.http=c,this.tokenService=s,this._url=`${g.N.API_URL}/Marca/`,this.estado=1}setMarca(c){const s=new l.WM({"Content-Type":"application/json"});return this.http.post(this._url+"SetMarca",JSON.stringify(c),{headers:s}).pipe((0,I.K)(p=>(console.error(p),(0,v._)({ok:!1,estado:"401",mensaje:"Sin Autorizacion"}))))}putMarca(c,s,p,m,t){const Z={c_Id_Marca:c,c_Nombre:s,c_Img_Base:p,c_Descripcion:m,c_Usuario_Modificacion:t},O=new l.WM({"Content-Type":"application/json"});return this.http.post(this._url+"PutMarca",JSON.stringify(Z),{headers:O}).pipe((0,I.K)(b=>(console.error(b),(0,v._)({ok:!1,estado:"401",mensaje:"Sin Autorizacion"}))))}CambiarEstadoMarca(c,s,p){const m=new l.WM({"Content-Type":"application/json"});return this.http.post(`${this._url}CambiarEstadoMarca?IdMarca=${c}&IdUM=${s}&razon=${p}`,m)}getMarca(c){return this.http.get(`${this._url}GetMarca`,{params:{searchTerm:c}})}getMarcaById(c){return this.http.get(`${this._url}GetMarcaById?IdS=${c}`)}static#t=this.\u0275fac=function(s){return new(s||h)(C.LFG(l.eN),C.LFG(U.B))};static#a=this.\u0275prov=C.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()},8259:(j,M,n)=>{n.r(M),n.d(M,{CategoriaGridModule:()=>q});var l=n(96814),g=n(29522),v=n(33594),I=n(62008),C=n(95982),U=n(51513),E=n(22096),h=n(86820),F=n(83951),c=n(2852),s=n(37398),p=n(96726),m=n(84005),t=n(65879),Z=n(19347),O=n(3527),b=n(22939),S=n(42524),_=n(74104),y=n(32296),A=n(30617),k=n(92596),J=n(23680);function N(e,d){1&e&&t._UZ(0,"mat-icon",10)}function D(e,d){1&e&&t._UZ(0,"mat-icon",11)}let L=(()=>{class e{constructor(){this.openContact=new t.vpe,this.toggleStar=new t.vpe}ngOnInit(){}emitToggleStar(i,o){i.stopPropagation(),this.toggleStar.emit(o)}static#t=this.\u0275fac=function(o){return new(o||e)};static#a=this.\u0275cmp=t.Xpm({type:e,selectors:[["vex-contacts-card"]],inputs:{contact:"contact"},outputs:{openContact:"openContact",toggleStar:"toggleStar"},decls:15,vars:5,consts:[[1,"card","overflow-hidden"],["matRipple","",1,"p-4","text-center","hover:bg-hover","trans-ease-out","cursor-pointer","relative",3,"click"],[1,"title","mb-1","mt-3"],[1,"body-2","text-secondary","flex","items-center","justify-center"],["svgIcon","mat:date_range",1,"ltr:mr-1","rtl:ml-1","icon-xs"],[1,"truncate-text"],["mat-icon-button","","type","button",1,"absolute","top-2","right-2",3,"click"],["svgIcon","mat:cancel",4,"ngIf"],["svgIcon","mat:control_point",4,"ngIf"],[1,"bg-app-bar","p-2","flex","items-center","justify-around",2,"height","2rem"],["svgIcon","mat:cancel"],["svgIcon","mat:control_point"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return a.openContact.emit(a.contact.c_Id_Categoria)}),t.TgZ(2,"h2",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3),t._UZ(5,"mat-icon",4),t.TgZ(6,"span"),t._uU(7),t.qZA()(),t.TgZ(8,"div",3)(9,"span",5),t._uU(10),t.qZA()(),t.TgZ(11,"button",6),t.NdJ("click",function(u){return a.emitToggleStar(u,null==a.contact?null:a.contact.c_Id_Categoria)}),t.YNc(12,N,1,0,"mat-icon",7),t.YNc(13,D,1,0,"mat-icon",8),t.qZA()(),t._UZ(14,"div",9),t.qZA()),2&o&&(t.xp6(3),t.Oqu(null==a.contact?null:a.contact.c_Nombre_Categoria),t.xp6(4),t.Oqu(null==a.contact?null:a.contact.c_Fecha_Creacion),t.xp6(3),t.Oqu(null==a.contact?null:a.contact.c_Descripcion),t.xp6(2),t.Q6J("ngIf",1==(null==a.contact?null:a.contact.c_Estado)),t.xp6(1),t.Q6J("ngIf",2==(null==a.contact?null:a.contact.c_Estado)))},dependencies:[l.O5,y.RK,A.Hw,J.wG],styles:['@charset "UTF-8";.truncate-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:200px}']})}return e})();var P=n(82599);const R=["searchInput"];function $(e,d){if(1&e&&(t.TgZ(0,"a",24,25),t._uU(2),t.qZA()),2&e){const i=d.$implicit,o=t.MAs(1);t.Q6J("active",o.isActive)("disabled",i.disabled)("routerLink",i.route),t.xp6(2),t.hij(" ",i.label," ")}}function w(e,d){if(1&e){const i=t.EpF();t.TgZ(0,"vex-contacts-card",29),t.NdJ("openContact",function(a){t.CHM(i);const r=t.oxw(2);return t.KtG(r.openContact(a))})("toggleStar",function(a){t.CHM(i);const r=t.oxw(2);return t.KtG(r.toggleStar(a))}),t.qZA()}if(2&e){const i=d.$implicit;t.Q6J("@fadeInUp",void 0)("contact",i)}}function Q(e,d){if(1&e&&(t.TgZ(0,"div",26)(1,"div",27),t.YNc(2,w,1,2,"vex-contacts-card",28),t.ALo(3,"async"),t.qZA()()),2&e){const i=t.oxw();t.Q6J("@stagger",void 0),t.xp6(2),t.Q6J("ngForOf",t.lcZ(3,3,i.filteredContacts$))("ngForTrackBy",i.trackById)}}function z(e,d){1&e&&(t.TgZ(0,"div",30),t._UZ(1,"img",31),t.TgZ(2,"h2",32),t._uU(3,"No contacts matching your filters"),t.qZA()()),2&e&&t.Q6J("@scaleFadeIn",void 0)}function Y(e,d){return d.c_Id_Categoria}const K=[{path:"",redirectTo:"all",pathMatch:"full"},{path:":activeCategory",component:(()=>{class e{buscar(){const i=this.searchInput.nativeElement.value.toLowerCase();if(i){const o=this.Categoria.filter(a=>{for(const r in a)if(a.hasOwnProperty(r)&&"string"==typeof a[r]&&a[r].toLowerCase().includes(i))return!0;return!1});this.filteredContacts$=this.route.paramMap.pipe((0,s.U)(a=>a.get("activeCategory")),(0,s.U)(a=>{switch(a){case"activos":return this.activeCategory=a,o.filter(r=>1===r.c_Estado);case"inactivos":return this.activeCategory=a,o.filter(r=>2===r.c_Estado);default:return o}}))}}constructor(i,o,a,r,u,B,f){this.dialog=i,this.route=o,this.MarcaService=a,this.router=r,this.renderer=u,this.snackBar=B,this.CategoriaService=f,this.estado=1,this.Categoria=[],this.filteredContacts$=(0,E.of)([]),this.loadingData=!0,this.activeCategory="activos",this.tableData=this.Categoria,this.links=[{label:"Activos",route:"../activos"},{label:"Inactivos",route:"../inactivos"}],this.trackById=Y}ngOnInit(){this.obtenerTablaData()}obtenerTablaData(){this.CategoriaService.getCategoria("").subscribe(i=>{this.Categoria=i.response,this.tableData=this.Categoria.filter(o=>o.c_Estado===this.estado),this.filteredContacts$=this.route.paramMap.pipe((0,s.U)(o=>o.get("activeCategory")),(0,s.U)(o=>{switch(o){case"activos":return this.activeCategory=o,this.Categoria.filter(a=>1===a.c_Estado);case"inactivos":return this.activeCategory=o,this.Categoria.filter(a=>2===a.c_Estado);default:return this.Categoria}}))})}openContact(i){this.dialog.open(U.n,{data:i||null,width:"45rem"})}toggleStar(i){this.Categoria.find(f=>f.c_Id_Categoria===i);const a=localStorage.getItem("token"),u=(0,p.Z)(a).IdUsuario;this.c_Id_UsuarioModificacion=u,"activos"==this.activeCategory?(this.titulo="\xbfEst\xe1s seguro que deseas desactivar la marca?",this.razon="Razon por la cual se desactiva el registro",this.estado=1):(this.titulo="\xbfEst\xe1s seguro de que deseas activar la marca?",this.razon="Razon por la cual se activa el registro",this.estado=2),console.log(this.titulo,this.activeCategory),this.dialog.open(m.$,{height:"20rem",width:"28rem",data:{title:this.titulo,textAreaValue:"",razon:this.razon,valido:!0}}).afterClosed().subscribe(f=>{f&&this.CategoriaService.CambiarEstadoCategoria(i,this.c_Id_UsuarioModificacion,f).subscribe(T=>{console.log(T),T.ok?(this.snackBar.open(T.transaccion_Mensaje,"Cerrar",{duration:5e3,panelClass:["success-snackbar"]}),this.obtenerTablaData(),this.filteredContacts$=this.route.paramMap.pipe((0,s.U)(x=>x.get("activeCategory")),(0,s.U)(x=>{switch(x){case"activos":return this.activeCategory=x,this.Categoria.filter(G=>1===G.c_Estado);case"inactivos":return this.activeCategory=x,this.Categoria.filter(G=>2===G.c_Estado);default:return this.Categoria}}))):this.snackBar.open("Codigo de Error: "+T.transaccion_Estado+" Mensje: "+T.transaccion_Mensaje,"Cerrar",{duration:1e4,panelClass:["red-snackbar"]})})})}onToggleChange(i){i.checked&&"activos"==this.activeCategory?(this.MarcaService.estado=1,this.router.navigate(["/apps/categoria/table"])):i.checked&&"inactivos"==this.activeCategory&&(this.MarcaService.estado=2,this.router.navigate(["/apps/categoria/table"]))}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(Z.uw),t.Y36(g.gz),t.Y36(O.I),t.Y36(g.F0),t.Y36(t.Qsj),t.Y36(b.ux),t.Y36(S.n))};static#a=this.\u0275cmp=t.Xpm({type:e,selectors:[["vex-contacts-grid"]],viewQuery:function(o,a){if(1&o&&t.Gf(R,7),2&o){let r;t.iGM(r=t.CRH())&&(a.searchInput=r.first)}},decls:30,vars:10,consts:[[1,"h-full","flex","flex-col"],[1,"p-6","pb-0","bg-foreground","shadow-b","flex-none","border-b","border-gray-200"],[1,"container","px-0"],[1,"display-1","font-bold","mt-0","mb-4","flex","items-center"],[1,"w-12","h-12","rounded-full","text-primary","ltr:mr-4","rtl:ml-4","flex","items-center","justify-center","bg-primary/10"],["svgIcon","mat:table_chart"],[1,"block"],[1,"sm:flexi","tems-center","bg-foreground","rounded-full","overflow-hidden","relative","ltr:pl-5","rtl:pr-5","h-12","max-w-md","w-full","shadow-xl","mx-auto"],[1,"search-icon"],["svgIcon","mat:search",1,"text-secondary"],["placeholder","Buscar...","type","text",1,"border-0","h-12","outline-none","ltr:pl-4","rtl:pr-4","placeholder:text-secondary","bg-foreground","flex-auto",3,"input"],["searchInput",""],[1,"flex","items-center"],["mat-tab-nav-bar","",1,"border-0","flex-auto"],["mat-tab-link","","routerLinkActive","",3,"active","disabled","routerLink",4,"ngFor","ngForOf"],[1,"ltr:ml-1","rtl:mr-1","flex-none","hidden","sm:inline-block"],["for","gridViewToggle",2,"margin-right","0.3rem"],["id","gridViewToggle","color","primary",3,"checked","change"],["color","primary","mat-mini-fab","","matTooltip","Registrar Categoria","type","button",1,"ltr:ml-1","rtl:mr-1","flex-none","sm:hidden",3,"click"],["svgIcon","mat:person_add"],["color","primary","mat-flat-button","","type","button",1,"ltr:ml-4","rtl:mr-4","flex-none","hidden","sm:inline-block",3,"click"],["svgIcon","mat:add",1,"ltr:mr-2","rtl:ml-2","ltr:-ml-1","rtl:-mr-1","icon-sm"],["class","overflow-y-auto flex-auto",4,"ngIf"],["class","flex-auto flex flex-col items-center justify-center",4,"ngIf"],["mat-tab-link","","routerLinkActive","",3,"active","disabled","routerLink"],["rla","routerLinkActive"],[1,"overflow-y-auto","flex-auto"],[1,"p-gutter","grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-4","gap-6","container"],[3,"contact","openContact","toggleStar",4,"ngFor","ngForOf","ngForTrackBy"],[3,"contact","openContact","toggleStar"],[1,"flex-auto","flex","flex-col","items-center","justify-center"],["src","assets/img/illustrations/idea.svg",1,"m-12","h-64"],[1,"headline","m-0","text-center"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"span",4),t._UZ(5,"mat-icon",5),t.qZA(),t.TgZ(6,"span",6),t._uU(7,"Categoria"),t.qZA()(),t.TgZ(8,"div",7)(9,"div",8),t._UZ(10,"mat-icon",9),t.qZA(),t.TgZ(11,"input",10,11),t.NdJ("input",function(){return a.buscar()}),t.qZA()(),t.TgZ(13,"div",12)(14,"nav",13),t.YNc(15,$,3,4,"a",14),t.qZA(),t.TgZ(16,"div",15)(17,"label",16),t._uU(18,"Vista de lista"),t.qZA(),t.TgZ(19,"mat-slide-toggle",17),t.NdJ("change",function(u){return a.onToggleChange(u)}),t.qZA()(),t.TgZ(20,"button",18),t.NdJ("click",function(){return a.openContact()}),t._UZ(21,"mat-icon",19),t.qZA(),t.TgZ(22,"button",20),t.NdJ("click",function(){return a.openContact()}),t._UZ(23,"mat-icon",21),t.TgZ(24,"span"),t._uU(25,"Registrar Categoria"),t.qZA()()()()(),t.YNc(26,Q,4,5,"div",22),t.ALo(27,"async"),t.YNc(28,z,4,1,"div",23),t.ALo(29,"async"),t.qZA()),2&o&&(t.xp6(4),t.Q6J("@scaleIn",void 0),t.xp6(2),t.Q6J("@fadeInRight",void 0),t.xp6(9),t.Q6J("ngForOf",a.links),t.xp6(4),t.Q6J("checked",!1),t.xp6(7),t.Q6J("ngIf",t.lcZ(27,6,a.filteredContacts$).length>0),t.xp6(2),t.Q6J("ngIf",0===t.lcZ(29,8,a.filteredContacts$).length))},dependencies:[l.sg,l.O5,g.rH,g.Od,v.jG,_.BU,_.Nj,y.lW,y.nh,A.Hw,k.gM,L,P.Rr,l.Ov],styles:['@charset "UTF-8";@media (min-width: 768px){.card-list[_ngcontent-%COMP%]{display:none}}@media (max-width: 767px){.table-list[_ngcontent-%COMP%]{display:none}}.sm-flexi[_ngcontent-%COMP%]{position:relative}.search-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:10px;transform:translateY(-50%)}input[_ngcontent-%COMP%]{padding-left:30px}'],data:{animation:[I.a,C.G,h.KF,F.$,c.f]}})}return e})(),data:{scrollDisabled:!0,toolbarShadowEnabled:!1}}];let W=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#a=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(K),g.Bz,v.d8]})}return e})();var H=n(32253);let V=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#a=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[l.ez,y.ot,A.Ps,J.si]})}return e})();var X=n(498);let q=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#a=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[l.ez,W,_.Nh,b.ZX,y.ot,Z.Is,H.t,A.Ps,k.AV,V,P.rP,X.ComponentsSlideToggleModule]})}return e})()}}]);