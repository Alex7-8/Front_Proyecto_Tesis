"use strict";(self.webpackChunkvex=self.webpackChunkvex||[]).push([[9946],{20021:(P,m,o)=>{o.d(m,{J:()=>t});var h=o(96814),d=o(29522),c=o(30617),g=o(65879);let t=(()=>{class i{static#t=this.\u0275fac=function(f){return new(f||i)};static#o=this.\u0275mod=g.oAB({type:i});static#e=this.\u0275inj=g.cJS({imports:[h.ez,d.Bz,c.Ps]})}return i})()},13680:(P,m,o)=>{o.d(m,{K:()=>p});var h=o(96814),d=o(29522),c=o(32296),g=o(30617),t=o(20021),i=o(65879);let p=(()=>{class u{static#t=this.\u0275fac=function(v){return new(v||u)};static#o=this.\u0275mod=i.oAB({type:u});static#e=this.\u0275inj=i.cJS({imports:[h.ez,d.Bz,c.ot,g.Ps,t.J]})}return u})()},59946:(P,m,o)=>{o.r(m),o.d(m,{FormCrearUsuariosModule:()=>Y});var h=o(96814),d=o(22939),c=o(29522),g=o(33594),t=o(56223),i=o(27921),p=o(37398),u=o(83951),f=o(86820),M=o(96726),v=o(94664),D=o(84005),n=o(65879),S=o(15896),x=o(71996),U=o(19347);const k=[{path:"",component:(()=>{class s{constructor(a,e,l,I,r,_,C,O,F){this.cd=a,this.ngZone=e,this.fb=l,this.catalogoService=I,this.crearUsuariosService=r,this.router=_,this.snackBar=C,this.cdr=O,this.dialog=F,this.departamentos=[],this.imagen="",this.Id_Usuario="",this.Id_Sucursal="",this.inputType="password",this.visible=!1,this.showConfirmDialog=!1,this.selectedImage=null,this.selectedImageURL="https://img.srvcentral.com/Sistema/ImagenPorDefecto/Registro.png",this.DeptoCtrl=new t.NI,this.MunCtrl=new t.NI}openConfirmDialog(){this.dialog.open(D.$,{height:"15rem",width:"25rem"}).afterClosed().subscribe(e=>{e&&this.onSubmit()})}ngOnInit(){this.usuarioForm=this.fb.group({c_Id_Usuario:["",t.kI.compose([t.kI.required,t.kI.pattern(/^[a-zA-Z0-9]*$/),t.kI.minLength(4),t.kI.maxLength(24)])],c_ID_Rol_Persona:[,t.kI.required],c_ID_ROL:[["Servicio"],t.kI.required],c_Tipo_Cuenta:[,t.kI.required],c_Id_Sucursal:[,t.kI.required],c_Id_Genero:[,t.kI.required],c_Id_Departamento:[,t.kI.required],c_Id_Municipio:[,t.kI.required],c_Primer_Nombre:[""],c_Segundo_Nombre:[""],c_Tercer_Nombre:[""],c_Primer_Apellido:["",t.kI.compose([t.kI.required,t.kI.minLength(1),t.kI.pattern(/^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xfc\xdc]*$/)])],c_Segundo_Apellido:["",t.kI.compose([t.kI.required,t.kI.minLength(1),t.kI.pattern(/^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xfc\xdc]*$/)])],c_Apellido_Casada:["",t.kI.compose([t.kI.minLength(1),t.kI.pattern(/^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xfc\xdc]*$/)])],c_DPI:["",t.kI.compose([t.kI.required,t.kI.minLength(13),t.kI.maxLength(13)])],c_NIT:["",t.kI.compose([t.kI.minLength(10),t.kI.maxLength(10),t.kI.pattern(/^[0-9]*$/)])],c_Direccion:["",t.kI.compose([t.kI.required,t.kI.minLength(1),t.kI.pattern(/^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xfc\xdc\s\d,-]*$/)])],c_PNumero_Telefono:["",t.kI.compose([t.kI.required,t.kI.minLength(8),t.kI.maxLength(8),t.kI.pattern(/^[0-9]*$/)])],c_SNumero_Telefono:["",t.kI.compose([t.kI.required,t.kI.minLength(8),t.kI.maxLength(8),t.kI.pattern(/^[0-9]*$/)])],c_Correo:["",[t.kI.required,t.kI.email]],c_Img_Base:["0"],c_Fecha_Nacimiento:["",t.kI.required],c_Usuario_Creacion:[""]}),this.filteredDepartamento$=this.DeptoCtrl.valueChanges.pipe((0,i.O)(""),(0,v.w)(r=>this.catalogoService.getDepartamentos(r)),(0,p.U)(r=>r.slice())),this.usuarioForm.get("c_Id_Departamento").valueChanges.subscribe(r=>{this.filteredMunicipio$=this.catalogoService.getMunicipioXDepartamentos(r,"zacapa")}),this.catalogoService.getRolUsuario("").subscribe(r=>{this.rols=r.response}),this.catalogoService.getGenero("").subscribe(r=>{this.generos=r.response}),this.catalogoService.getTipoCuenta("").subscribe(r=>{this.TipoCuenta=r.response});const a=localStorage.getItem("token"),e=(0,M.Z)(a),I=e.IdSucursal;this.Id_Usuario=e.IdUsuario,this.Id_Sucursal=I,this.ngZone.run(()=>{this.usuarioForm.get("c_Usuario_Creacion")?.setValue(this.Id_Usuario),this.usuarioForm.get("c_Id_Sucursal")?.setValue(this.Id_Sucursal);const _=this.usuarioForm.get("c_ID_ROL").value.map(C=>C.toString());this.usuarioForm.get("c_ID_ROL")?.patchValue(_)})}onFileSelected(a){const e=a.target;e?.files?.length&&(this.selectedImage=e.files[0],this.loadImage())}loadImage(){if(this.selectedImage){const a=new FileReader;a.onload=()=>{this.ngZone.run(()=>{this.selectedImageURL=a.result;const l=this.selectedImageURL.split(",");this.imagen=l[1],this.ngZone.run(()=>{this.usuarioForm.get("c_Img_Base")?.setValue(this.imagen)}),this.cdr.detectChanges()})},a.readAsDataURL(this.selectedImage)}}onSubmit(){this.usuarioForm.get("c_Id_Usuario"),this.usuarioForm.get("c_ID_Rol_Persona"),this.usuarioForm.get("c_ID_ROL"),this.usuarioForm.get("c_Tipo_Cuenta"),this.usuarioForm.get("c_Id_Sucursal"),this.usuarioForm.get("c_Id_Genero"),this.usuarioForm.get("c_Id_Municipio"),this.usuarioForm.get("c_Primer_Nombre"),this.usuarioForm.get("c_Segundo_Nombre"),this.usuarioForm.get("c_Tercer_Nombre"),this.usuarioForm.get("c_Primer_Apellido"),this.usuarioForm.get("c_Segundo_Apellido"),this.usuarioForm.get("c_Apellido_Casada"),this.usuarioForm.get("c_DPI"),this.usuarioForm.get("c_NIT"),this.usuarioForm.get("c_Direccion"),this.usuarioForm.get("c_PNumero_Telefono"),this.usuarioForm.get("c_SNumero_Telefono"),this.usuarioForm.get("c_Correo"),this.usuarioForm.get("c_Img_Base"),this.usuarioForm.get("c_Fecha_Nacimiento"),this.usuarioForm.get("c_Usuario_Creacion")}static#t=this.\u0275fac=function(e){return new(e||s)(n.Y36(n.sBO),n.Y36(n.R0b),n.Y36(t.QS),n.Y36(S.F),n.Y36(x.x),n.Y36(c.F0),n.Y36(d.ux),n.Y36(n.sBO),n.Y36(U.uw))};static#o=this.\u0275cmp=n.Xpm({type:s,selectors:[["vex-form-elements"]],decls:0,vars:0,template:function(e,l){},styles:['@charset "UTF-8";.card[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 4px 12px #0000001a;background-color:#fff}.form-fields-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-field-row[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:10px}.success-snackbar[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.error-snackbar[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.image-upload-container[_ngcontent-%COMP%]{width:150px;height:auto;border:2px solid black;position:relative;display:flex;flex-direction:column;align-items:center;text-align:center}.image-upload-container[_ngcontent-%COMP%]   .selected-image-container[_ngcontent-%COMP%]{width:100%;flex:1;display:flex;align-items:center;justify-content:center;overflow:hidden}.image-upload-container[_ngcontent-%COMP%]   .selected-image-container[_ngcontent-%COMP%]   .selected-image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.image-upload-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.image-upload-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .custom-file-upload[_ngcontent-%COMP%]{cursor:pointer;background-color:#f0f0f0;border:1px solid #ccc;padding:5px 10px;border-radius:5px;transition:background-color .3s ease}.image-upload-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .custom-file-upload[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.image-upload-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%;max-width:800px;margin:0 50px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:10px;text-align:center}th[_ngcontent-%COMP%]{background-color:#f2f2f2}tfoot[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:700}th[_ngcontent-%COMP%]:first-child, td[_ngcontent-%COMP%]:first-child{border-left:none}th[_ngcontent-%COMP%]:last-child, td[_ngcontent-%COMP%]:last-child{border-right:none}'],data:{animation:[f.Nu,u.$]},changeDetection:0})}return s})()}];let L=(()=>{class s{static#t=this.\u0275fac=function(e){return new(e||s)};static#o=this.\u0275mod=n.oAB({type:s});static#e=this.\u0275inj=n.cJS({imports:[c.Bz.forChild(k),c.Bz,g.d8]})}return s})();var E=o(24516),T=o(30617),A=o(32296),b=o(98525),R=o(38034),B=o(23680),N=o(24630),y=o(92202),K=o(75986),z=o(87466),$=o(82599),W=o(13680),Z=o(20021);let Y=(()=>{class s{static#t=this.\u0275fac=function(e){return new(e||s)};static#o=this.\u0275mod=n.oAB({type:s});static#e=this.\u0275inj=n.cJS({imports:[h.ez,L,E.c,T.Ps,A.ot,t.u5,b.LD,R.FA,B.XK,t.UX,N.Bb,y.KP,K.p9,z.Fk,$.rP,W.K,Z.J,d.ZX]})}return s})()}}]);