"use strict";(self.webpackChunkvex=self.webpackChunkvex||[]).push([[9946],{20021:(M,d,t)=>{t.d(d,{J:()=>o});var g=t(96814),_=t(29522),l=t(30617),p=t(65879);let o=(()=>{class c{}return c.\u0275fac=function(m){return new(m||c)},c.\u0275mod=p.oAB({type:c}),c.\u0275inj=p.cJS({imports:[g.ez,_.Bz,l.Ps]}),c})()},13680:(M,d,t)=>{t.d(d,{K:()=>h});var g=t(96814),_=t(29522),l=t(32296),p=t(30617),o=t(20021),c=t(65879);let h=(()=>{class m{}return m.\u0275fac=function(A){return new(A||m)},m.\u0275mod=c.oAB({type:m}),m.\u0275inj=c.cJS({imports:[g.ez,_.Bz,l.ot,p.Ps,o.J]}),m})()},59946:(M,d,t)=>{t.r(d),t.d(d,{FormCrearUsuariosModule:()=>oe});var g=t(96814),_=t(22939),l=t(29522),p=t(33594),o=t(56223),c=t(27921),h=t(37398),m=t(83951),U=t(86820),A=t(96726),N=t(94664),E=t(84005),e=t(65879),k=t(15896),q=t(71996),L=t(19347),x=t(24516),v=t(41043),b=t(30617),O=t(32296),S=t(98525),D=t(23680),T=t(38034);function R(r,s){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Este campo es requerido."),e.qZA())}function B(r,s){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Este campo es requerido."),e.qZA())}function y(r,s){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Solo se permiten letras."),e.qZA())}function J(r,s){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Este campo es requerido."),e.qZA())}function Y(r,s){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Solo se permiten letras."),e.qZA())}function Q(r,s){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Solo se permiten numeros."),e.qZA())}function K(r,s){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Debe tener 10 caracteres."),e.qZA())}function $(r,s){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"No puede exceder de los 10 caracteres."),e.qZA())}const j=[{path:"",component:(()=>{class r{constructor(n,a,u,f,i,C,I,F,P){this.cd=n,this.ngZone=a,this.fb=u,this.catalogoService=f,this.crearUsuariosService=i,this.router=C,this.snackBar=I,this.cdr=F,this.dialog=P,this.departamentos=[],this.imagen="",this.Id_Usuario="",this.Id_Sucursal="",this.inputType="password",this.visible=!1,this.showConfirmDialog=!1,this.selectedImage=null,this.selectedImageURL="https://img.srvcentral.com/Sistema/ImagenPorDefecto/Registro.png",this.DeptoCtrl=new o.NI,this.MunCtrl=new o.NI}openConfirmDialog(){this.dialog.open(E.$,{height:"15rem",width:"25rem"}).afterClosed().subscribe(a=>{a&&this.onSubmit()})}ngOnInit(){this.usuarioForm=this.fb.group({c_Id_Usuario:["",o.kI.compose([o.kI.required,o.kI.pattern(/^[a-zA-Z0-9]*$/),o.kI.minLength(4),o.kI.maxLength(24)])],c_ID_Rol_Persona:[,o.kI.required],c_ID_ROL:[["Servicio"],o.kI.required],c_Tipo_Cuenta:[,o.kI.required],c_Id_Sucursal:[,o.kI.required],c_Id_Genero:[,o.kI.required],c_Id_Departamento:[,o.kI.required],c_Id_Municipio:[,o.kI.required],c_Primer_Nombre:[""],c_Segundo_Nombre:[""],c_Tercer_Nombre:[""],c_Primer_Apellido:["",o.kI.compose([o.kI.required,o.kI.minLength(1),o.kI.pattern(/^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xfc\xdc]*$/)])],c_Segundo_Apellido:["",o.kI.compose([o.kI.required,o.kI.minLength(1),o.kI.pattern(/^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xfc\xdc]*$/)])],c_Apellido_Casada:["",o.kI.compose([o.kI.minLength(1),o.kI.pattern(/^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xfc\xdc]*$/)])],c_DPI:["",o.kI.compose([o.kI.required,o.kI.minLength(13),o.kI.maxLength(13)])],c_NIT:["",o.kI.compose([o.kI.minLength(10),o.kI.maxLength(10),o.kI.pattern(/^[0-9]*$/)])],c_Direccion:["",o.kI.compose([o.kI.required,o.kI.minLength(1),o.kI.pattern(/^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xfc\xdc\s\d,-]*$/)])],c_PNumero_Telefono:["",o.kI.compose([o.kI.required,o.kI.minLength(8),o.kI.maxLength(8),o.kI.pattern(/^[0-9]*$/)])],c_SNumero_Telefono:["",o.kI.compose([o.kI.required,o.kI.minLength(8),o.kI.maxLength(8),o.kI.pattern(/^[0-9]*$/)])],c_Correo:["",[o.kI.required,o.kI.email]],c_Img_Base:["0"],c_Fecha_Nacimiento:["",o.kI.required],c_Usuario_Creacion:[""]}),this.filteredDepartamento$=this.DeptoCtrl.valueChanges.pipe((0,c.O)(""),(0,N.w)(i=>this.catalogoService.getDepartamentos(i)),(0,h.U)(i=>i.slice())),this.usuarioForm.get("c_Id_Departamento").valueChanges.subscribe(i=>{this.filteredMunicipio$=this.catalogoService.getMunicipioXDepartamentos(i,"zacapa")}),this.catalogoService.getRolUsuario("").subscribe(i=>{this.rols=i.response}),this.catalogoService.getGenero("").subscribe(i=>{this.generos=i.response}),this.catalogoService.getTipoCuenta("").subscribe(i=>{this.TipoCuenta=i.response});const n=localStorage.getItem("token"),a=(0,A.Z)(n),f=a.IdSucursal;this.Id_Usuario=a.IdUsuario,this.Id_Sucursal=f,this.ngZone.run(()=>{this.usuarioForm.get("c_Usuario_Creacion")?.setValue(this.Id_Usuario),this.usuarioForm.get("c_Id_Sucursal")?.setValue(this.Id_Sucursal);const C=this.usuarioForm.get("c_ID_ROL").value.map(I=>I.toString());this.usuarioForm.get("c_ID_ROL")?.patchValue(C)})}onFileSelected(n){const a=n.target;a?.files?.length&&(this.selectedImage=a.files[0],this.loadImage())}loadImage(){if(this.selectedImage){const n=new FileReader;n.onload=()=>{this.ngZone.run(()=>{this.selectedImageURL=n.result;const u=this.selectedImageURL.split(",");this.imagen=u[1],this.ngZone.run(()=>{this.usuarioForm.get("c_Img_Base")?.setValue(this.imagen)}),this.cdr.detectChanges()})},n.readAsDataURL(this.selectedImage)}}onSubmit(){const n=this.usuarioForm.get("c_Id_Usuario").value,a=this.usuarioForm.get("c_ID_Rol_Persona").value,u=this.usuarioForm.get("c_ID_ROL").value,f=this.usuarioForm.get("c_Tipo_Cuenta").value,i=this.usuarioForm.get("c_Id_Sucursal").value,C=this.usuarioForm.get("c_Id_Genero").value,I=this.usuarioForm.get("c_Id_Municipio").value,F=this.usuarioForm.get("c_Primer_Nombre").value,P=this.usuarioForm.get("c_Segundo_Nombre").value,te=this.usuarioForm.get("c_Tercer_Nombre").value,re=this.usuarioForm.get("c_Primer_Apellido").value,ae=this.usuarioForm.get("c_Segundo_Apellido").value,ne=this.usuarioForm.get("c_Apellido_Casada").value,ie=this.usuarioForm.get("c_DPI").value,se=this.usuarioForm.get("c_NIT").value,ce=this.usuarioForm.get("c_Direccion").value,ue=this.usuarioForm.get("c_PNumero_Telefono").value,me=this.usuarioForm.get("c_SNumero_Telefono").value,le=this.usuarioForm.get("c_Correo").value,de=this.usuarioForm.get("c_Img_Base").value,_e=this.usuarioForm.get("c_Fecha_Nacimiento").value,pe=this.usuarioForm.get("c_Usuario_Creacion").value;this.crearUsuariosService.setEmpleado(n,u,a,f,i,C,I,F,P,te,re,ae,ne,ie,se,ce,ue,me,le,de,"",_e,pe).subscribe(Z=>{Z.ok?this.snackBar.open(Z.transaccion_Mensaje,"Cerrar",{duration:5e3,panelClass:["success-snackbar"]}):this.snackBar.open(`Error: ${Z.transaccion_Estado} ${Z.transaccion_Mensaje}`,"Cerrar",{duration:1e4,panelClass:["error-snackbar"]})},Z=>{this.snackBar.open("Error Inesperado","Cerrar",{duration:15e3,panelClass:["error-snackbar"]})})}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(e.sBO),e.Y36(e.R0b),e.Y36(o.QS),e.Y36(k.F),e.Y36(q.x),e.Y36(l.F0),e.Y36(_.ux),e.Y36(e.sBO),e.Y36(L.uw))},r.\u0275cmp=e.Xpm({type:r,selectors:[["vex-form-elements"]],decls:124,vars:14,consts:[[1,"p-gutter","container"],[1,"flex","flex-col","sm:flex-row","gap-4",3,"formGroup"],[1,"card","flex-auto"],[1,"px-6","py-4","borde","r-b","flex","items-center"],[1,"title","m-0"],[1,"px-6","py-4","flex","flex-col"],[1,"flex","flex-col","sm:flex-row","sm:gap-4"],[1,"flex-auto"],["value","Apples"],["value","Peaches"],["value","Bananas"],["formControlName","c_Fecha_Nacimiento","matInput","",3,"matDatepicker"],["matSuffix","",3,"for"],["datepickerRef",""],[4,"ngIf"],["formControlName","c_Primer_Nombre","matInput","","required",""],["matSuffix","","svgIcon","mat:person"],["formControlName","c_Segundo_Nombre","matInput","","required",""],["formControlName","c_NIT","matInput",""],["border","1"],[1,"flex","items-center","justify-end","gap-2"],["mat-button","","type","button"],["color","primary","mat-raised-button","","type","button",3,"disabled","click"]],template:function(n,a){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),e._uU(5,"Formulario Facturacion"),e.qZA()(),e._UZ(6,"div",5),e.TgZ(7,"div",5)(8,"div",6)(9,"mat-form-field",7)(10,"mat-label"),e._uU(11,"Tipo"),e.qZA(),e.TgZ(12,"mat-select")(13,"mat-option",8),e._uU(14,"Servicio"),e.qZA(),e.TgZ(15,"mat-option",9),e._uU(16,"Venta"),e.qZA(),e.TgZ(17,"mat-option",10),e._uU(18,"Compra"),e.qZA()()(),e.TgZ(19,"mat-form-field",7)(20,"mat-label"),e._uU(21,"Cliente"),e.qZA(),e.TgZ(22,"mat-select")(23,"mat-option",8),e._uU(24,"Alex Chacon"),e.qZA(),e.TgZ(25,"mat-option",9),e._uU(26,"Jose Franco"),e.qZA(),e.TgZ(27,"mat-option",10),e._uU(28,"Carlos Santos"),e.qZA()()(),e.TgZ(29,"mat-form-field",7)(30,"mat-label"),e._uU(31,"Servicio"),e.qZA(),e.TgZ(32,"mat-select")(33,"mat-option",8),e._uU(34,"Levantado de Texto"),e.qZA(),e.TgZ(35,"mat-option",9),e._uU(36,"Caja Rural Remesa"),e.qZA(),e.TgZ(37,"mat-option",10),e._uU(38,"Impresion"),e.qZA()()(),e.TgZ(39,"div",7)(40,"mat-form-field")(41,"mat-label"),e._uU(42,"Fecha"),e.qZA(),e._UZ(43,"input",11)(44,"mat-datepicker-toggle",12)(45,"mat-datepicker",null,13),e.YNc(47,R,2,0,"mat-error",14),e.qZA()()(),e.TgZ(48,"div",6)(49,"mat-form-field",7)(50,"mat-label"),e._uU(51,"Nombre"),e.qZA(),e._UZ(52,"input",15)(53,"mat-icon",16),e.YNc(54,B,2,0,"mat-error",14),e.YNc(55,y,2,0,"mat-error",14),e.qZA(),e.TgZ(56,"mat-form-field",7)(57,"mat-label"),e._uU(58,"Direccion"),e.qZA(),e._UZ(59,"input",17)(60,"mat-icon",16),e.YNc(61,J,2,0,"mat-error",14),e.YNc(62,Y,2,0,"mat-error",14),e.qZA(),e.TgZ(63,"mat-form-field",7)(64,"mat-label"),e._uU(65,"NIT"),e.qZA(),e._UZ(66,"input",18),e.YNc(67,Q,2,0,"mat-error",14),e.YNc(68,K,2,0,"mat-error",14),e.YNc(69,$,2,0,"mat-error",14),e.qZA()(),e.TgZ(70,"div",6)(71,"table",19)(72,"thead")(73,"tr")(74,"th"),e._uU(75,"Descripci\xf3n"),e.qZA(),e.TgZ(76,"th"),e._uU(77,"Precio"),e.qZA(),e.TgZ(78,"th"),e._uU(79,"Cantidad"),e.qZA(),e.TgZ(80,"th"),e._uU(81,"SubTotal"),e.qZA(),e.TgZ(82,"th"),e._uU(83,"IVA"),e.qZA(),e.TgZ(84,"th"),e._uU(85,"Total SubTotal"),e.qZA(),e.TgZ(86,"th"),e._uU(87,"Total"),e.qZA()()(),e.TgZ(88,"tbody")(89,"tr")(90,"td"),e._uU(91,"Levantado de Texto"),e.qZA(),e.TgZ(92,"td"),e._uU(93,"10.00"),e.qZA(),e.TgZ(94,"td"),e._uU(95,"2"),e.qZA(),e.TgZ(96,"td"),e._uU(97,"20.00"),e.qZA(),e.TgZ(98,"td"),e._uU(99,"3.60"),e.qZA(),e.TgZ(100,"td"),e._uU(101,"4.60"),e.qZA(),e.TgZ(102,"td"),e._uU(103,"23.60"),e.qZA()(),e.TgZ(104,"tr")(105,"td"),e._uU(106,"Caja Rusal Remesas"),e.qZA(),e.TgZ(107,"td"),e._uU(108,"1500.50"),e.qZA(),e.TgZ(109,"td"),e._uU(110,"1"),e.qZA(),e.TgZ(111,"td"),e._uU(112,"46.50"),e.qZA(),e.TgZ(113,"td"),e._uU(114,"8.37"),e.qZA(),e.TgZ(115,"td"),e._uU(116,"6.50"),e.qZA(),e.TgZ(117,"td"),e._uU(118,"54.87"),e.qZA()()()()(),e.TgZ(119,"div",20)(120,"button",21),e._uU(121,"Cancelar"),e.qZA(),e.TgZ(122,"button",22),e.NdJ("click",function(){return a.openConfirmDialog()}),e._uU(123,"Guardar"),e.qZA()()()()()()),2&n){const u=e.MAs(46);e.Q6J("@stagger",!0),e.xp6(1),e.Q6J("formGroup",a.usuarioForm),e.xp6(1),e.Q6J("@fadeInUp",void 0),e.xp6(41),e.Q6J("matDatepicker",u),e.xp6(1),e.Q6J("for",u),e.xp6(3),e.Q6J("ngIf",a.usuarioForm.get("c_Fecha_Nacimiento").hasError("required")),e.xp6(7),e.Q6J("ngIf",a.usuarioForm.get("c_Primer_Nombre").hasError("required")),e.xp6(1),e.Q6J("ngIf",a.usuarioForm.get("c_Primer_Nombre").hasError("pattern")),e.xp6(6),e.Q6J("ngIf",a.usuarioForm.get("c_Segundo_Nombre").hasError("required")),e.xp6(1),e.Q6J("ngIf",a.usuarioForm.get("c_Segundo_Nombre").hasError("pattern")),e.xp6(5),e.Q6J("ngIf",a.usuarioForm.get("c_NIT").hasError("pattern")),e.xp6(1),e.Q6J("ngIf",a.usuarioForm.get("c_NIT").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",a.usuarioForm.get("c_NIT").hasError("maxlength")),e.xp6(53),e.Q6J("disabled",!a.usuarioForm.valid)}},dependencies:[g.O5,x.Nt,v.KE,v.hX,v.TO,v.R9,b.Hw,O.lW,o.Fj,o.JJ,o.JL,o.Q7,S.gD,D.ey,T.Mq,T.hl,T.nW,o.sg,o.u],styles:['@charset "UTF-8";.card[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 4px 12px #0000001a;background-color:#fff}.form-fields-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-field-row[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:10px}.success-snackbar[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.error-snackbar[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.image-upload-container[_ngcontent-%COMP%]{width:150px;height:auto;border:2px solid black;position:relative;display:flex;flex-direction:column;align-items:center;text-align:center}.image-upload-container[_ngcontent-%COMP%]   .selected-image-container[_ngcontent-%COMP%]{width:100%;flex:1;display:flex;align-items:center;justify-content:center;overflow:hidden}.image-upload-container[_ngcontent-%COMP%]   .selected-image-container[_ngcontent-%COMP%]   .selected-image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.image-upload-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.image-upload-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .custom-file-upload[_ngcontent-%COMP%]{cursor:pointer;background-color:#f0f0f0;border:1px solid #ccc;padding:5px 10px;border-radius:5px;transition:background-color .3s ease}.image-upload-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .custom-file-upload[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.image-upload-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%;max-width:800px;margin:0 50px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:10px;text-align:center}th[_ngcontent-%COMP%]{background-color:#f2f2f2}tfoot[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:700}th[_ngcontent-%COMP%]:first-child, td[_ngcontent-%COMP%]:first-child{border-left:none}th[_ngcontent-%COMP%]:last-child, td[_ngcontent-%COMP%]:last-child{border-right:none}'],data:{animation:[U.Nu,m.$]},changeDetection:0}),r})()}];let z=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[l.Bz.forChild(j),l.Bz,p.d8]}),r})();var W=t(24630),G=t(92202),V=t(75986),X=t(87466),H=t(82599),w=t(13680),ee=t(20021);let oe=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[g.ez,z,x.c,b.Ps,O.ot,o.u5,S.LD,T.FA,D.XK,o.UX,W.Bb,G.KP,V.p9,X.Fk,H.rP,w.K,ee.J,_.ZX]}),r})()}}]);