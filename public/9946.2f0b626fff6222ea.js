"use strict";(self.webpackChunkvex=self.webpackChunkvex||[]).push([[9946],{20021:(F,d,o)=>{o.d(d,{J:()=>t});var h=o(96814),m=o(29522),l=o(30617),g=o(65879);let t=(()=>{class i{static#t=this.\u0275fac=function(v){return new(v||i)};static#o=this.\u0275mod=g.oAB({type:i});static#e=this.\u0275inj=g.cJS({imports:[h.ez,m.Bz,l.Ps]})}return i})()},13680:(F,d,o)=>{o.d(d,{K:()=>f});var h=o(96814),m=o(29522),l=o(32296),g=o(30617),t=o(20021),i=o(65879);let f=(()=>{class u{static#t=this.\u0275fac=function(P){return new(P||u)};static#o=this.\u0275mod=i.oAB({type:u});static#e=this.\u0275inj=i.cJS({imports:[h.ez,m.Bz,l.ot,g.Ps,t.J]})}return u})()},59946:(F,d,o)=>{o.r(d),o.d(d,{FormCrearUsuariosModule:()=>Y});var h=o(96814),m=o(22939),l=o(29522),g=o(33594),t=o(56223),i=o(27921),f=o(37398),u=o(83951),v=o(86820),D=o(96726),P=o(94664),S=o(84005),n=o(65879),x=o(15896),k=o(71996),U=o(19347);const E=[{path:"",component:(()=>{class s{constructor(a,e,c,I,r,_,C,M,O){this.cd=a,this.ngZone=e,this.fb=c,this.catalogoService=I,this.crearUsuariosService=r,this.router=_,this.snackBar=C,this.cdr=M,this.dialog=O,this.departamentos=[],this.imagen="",this.Id_Usuario="",this.Id_Sucursal="",this.inputType="password",this.visible=!1,this.showConfirmDialog=!1,this.selectedImage=null,this.selectedImageURL="https://img.srvcentral.com/Sistema/ImagenPorDefecto/Registro.png",this.DeptoCtrl=new t.NI,this.MunCtrl=new t.NI}openConfirmDialog(){this.dialog.open(S.$,{height:"15rem",width:"25rem"}).afterClosed().subscribe(e=>{e&&this.onSubmit()})}ngOnInit(){this.usuarioForm=this.fb.group({c_Id_Usuario:["",t.kI.compose([t.kI.required,t.kI.pattern(/^[a-zA-Z0-9]*$/),t.kI.minLength(4),t.kI.maxLength(24)])],c_ID_Rol_Persona:[,t.kI.required],c_ID_ROL:[["Servicio"],t.kI.required],c_Tipo_Cuenta:[,t.kI.required],c_Id_Sucursal:[,t.kI.required],c_Id_Genero:[,t.kI.required],c_Id_Departamento:[,t.kI.required],c_Id_Municipio:[,t.kI.required],c_Primer_Nombre:[""],c_Segundo_Nombre:[""],c_Tercer_Nombre:[""],c_Primer_Apellido:["",t.kI.compose([t.kI.required,t.kI.minLength(1),t.kI.pattern(/^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xfc\xdc]*$/)])],c_Segundo_Apellido:["",t.kI.compose([t.kI.required,t.kI.minLength(1),t.kI.pattern(/^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xfc\xdc]*$/)])],c_Apellido_Casada:["",t.kI.compose([t.kI.minLength(1),t.kI.pattern(/^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xfc\xdc]*$/)])],c_DPI:["",t.kI.compose([t.kI.required,t.kI.minLength(13),t.kI.maxLength(13)])],c_NIT:["",t.kI.compose([t.kI.minLength(10),t.kI.maxLength(10),t.kI.pattern(/^[0-9]*$/)])],c_Direccion:["",t.kI.compose([t.kI.required,t.kI.minLength(1),t.kI.pattern(/^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xfc\xdc\s\d,-]*$/)])],c_PNumero_Telefono:["",t.kI.compose([t.kI.required,t.kI.minLength(8),t.kI.maxLength(8),t.kI.pattern(/^[0-9]*$/)])],c_SNumero_Telefono:["",t.kI.compose([t.kI.required,t.kI.minLength(8),t.kI.maxLength(8),t.kI.pattern(/^[0-9]*$/)])],c_Correo:["",[t.kI.required,t.kI.email]],c_Img_Base:["0"],c_Fecha_Nacimiento:["",t.kI.required],c_Usuario_Creacion:[""]}),this.filteredDepartamento$=this.DeptoCtrl.valueChanges.pipe((0,i.O)(""),(0,P.w)(r=>this.catalogoService.getDepartamentos(r)),(0,f.U)(r=>r.slice())),this.usuarioForm.get("c_Id_Departamento").valueChanges.subscribe(r=>{this.filteredMunicipio$=this.catalogoService.getMunicipioXDepartamentos(r,"zacapa")}),this.catalogoService.getRolUsuario("").subscribe(r=>{this.rols=r.response}),this.catalogoService.getGenero("").subscribe(r=>{this.generos=r.response}),this.catalogoService.getTipoCuenta("").subscribe(r=>{this.TipoCuenta=r.response});const a=localStorage.getItem("token"),e=(0,D.Z)(a),I=e.IdSucursal;this.Id_Usuario=e.IdUsuario,this.Id_Sucursal=I,this.ngZone.run(()=>{this.usuarioForm.get("c_Usuario_Creacion")?.setValue(this.Id_Usuario),this.usuarioForm.get("c_Id_Sucursal")?.setValue(this.Id_Sucursal);const _=this.usuarioForm.get("c_ID_ROL").value.map(C=>C.toString());this.usuarioForm.get("c_ID_ROL")?.patchValue(_)})}onFileSelected(a){const e=a.target;e?.files?.length&&(this.selectedImage=e.files[0],this.loadImage())}loadImage(){if(this.selectedImage){const a=new FileReader;a.onload=()=>{this.ngZone.run(()=>{this.selectedImageURL=a.result;const c=this.selectedImageURL.split(",");this.imagen=c[1],this.ngZone.run(()=>{this.usuarioForm.get("c_Img_Base")?.setValue(this.imagen)}),this.cdr.detectChanges()})},a.readAsDataURL(this.selectedImage)}}onSubmit(){const a=this.usuarioForm.get("c_Id_Usuario").value,e=this.usuarioForm.get("c_ID_Rol_Persona").value,c=this.usuarioForm.get("c_ID_ROL").value,I=this.usuarioForm.get("c_Tipo_Cuenta").value,r=this.usuarioForm.get("c_Id_Sucursal").value,_=this.usuarioForm.get("c_Id_Genero").value,C=this.usuarioForm.get("c_Id_Municipio").value,M=this.usuarioForm.get("c_Primer_Nombre").value,O=this.usuarioForm.get("c_Segundo_Nombre").value,J=this.usuarioForm.get("c_Tercer_Nombre").value,V=this.usuarioForm.get("c_Primer_Apellido").value,G=this.usuarioForm.get("c_Segundo_Apellido").value,X=this.usuarioForm.get("c_Apellido_Casada").value,Q=this.usuarioForm.get("c_DPI").value,H=this.usuarioForm.get("c_NIT").value,w=this.usuarioForm.get("c_Direccion").value,q=this.usuarioForm.get("c_PNumero_Telefono").value,tt=this.usuarioForm.get("c_SNumero_Telefono").value,ot=this.usuarioForm.get("c_Correo").value,et=this.usuarioForm.get("c_Img_Base").value,at=this.usuarioForm.get("c_Fecha_Nacimiento").value,rt=this.usuarioForm.get("c_Usuario_Creacion").value;this.crearUsuariosService.setEmpleado(a,c,e,I,r,_,C,M,O,J,V,G,X,Q,H,w,q,tt,ot,et,"",at,rt).subscribe(p=>{p.ok?this.snackBar.open(p.transaccion_Mensaje,"Cerrar",{duration:5e3,panelClass:["success-snackbar"]}):this.snackBar.open(`Error: ${p.transaccion_Estado} ${p.transaccion_Mensaje}`,"Cerrar",{duration:1e4,panelClass:["error-snackbar"]})},p=>{this.snackBar.open("Error Inesperado","Cerrar",{duration:15e3,panelClass:["error-snackbar"]})})}static#t=this.\u0275fac=function(e){return new(e||s)(n.Y36(n.sBO),n.Y36(n.R0b),n.Y36(t.QS),n.Y36(x.F),n.Y36(k.x),n.Y36(l.F0),n.Y36(m.ux),n.Y36(n.sBO),n.Y36(U.uw))};static#o=this.\u0275cmp=n.Xpm({type:s,selectors:[["vex-form-elements"]],decls:0,vars:0,template:function(e,c){},styles:['@charset "UTF-8";.card[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 4px 12px #0000001a;background-color:#fff}.form-fields-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-field-row[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:10px}.success-snackbar[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.error-snackbar[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.image-upload-container[_ngcontent-%COMP%]{width:150px;height:auto;border:2px solid black;position:relative;display:flex;flex-direction:column;align-items:center;text-align:center}.image-upload-container[_ngcontent-%COMP%]   .selected-image-container[_ngcontent-%COMP%]{width:100%;flex:1;display:flex;align-items:center;justify-content:center;overflow:hidden}.image-upload-container[_ngcontent-%COMP%]   .selected-image-container[_ngcontent-%COMP%]   .selected-image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.image-upload-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.image-upload-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .custom-file-upload[_ngcontent-%COMP%]{cursor:pointer;background-color:#f0f0f0;border:1px solid #ccc;padding:5px 10px;border-radius:5px;transition:background-color .3s ease}.image-upload-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .custom-file-upload[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.image-upload-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%;max-width:800px;margin:0 50px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:10px;text-align:center}th[_ngcontent-%COMP%]{background-color:#f2f2f2}tfoot[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:700}th[_ngcontent-%COMP%]:first-child, td[_ngcontent-%COMP%]:first-child{border-left:none}th[_ngcontent-%COMP%]:last-child, td[_ngcontent-%COMP%]:last-child{border-right:none}'],data:{animation:[v.Nu,u.$]},changeDetection:0})}return s})()}];let b=(()=>{class s{static#t=this.\u0275fac=function(e){return new(e||s)};static#o=this.\u0275mod=n.oAB({type:s});static#e=this.\u0275inj=n.cJS({imports:[l.Bz.forChild(E),l.Bz,g.d8]})}return s})();var L=o(24516),T=o(30617),A=o(32296),B=o(98525),R=o(38034),N=o(23680),y=o(24630),K=o(92202),$=o(75986),z=o(87466),W=o(82599),Z=o(13680),j=o(20021);let Y=(()=>{class s{static#t=this.\u0275fac=function(e){return new(e||s)};static#o=this.\u0275mod=n.oAB({type:s});static#e=this.\u0275inj=n.cJS({imports:[h.ez,b,L.c,T.Ps,A.ot,t.u5,B.LD,R.FA,N.XK,t.UX,y.Bb,K.KP,$.p9,z.Fk,W.rP,Z.K,j.J,m.ZX]})}return s})()}}]);